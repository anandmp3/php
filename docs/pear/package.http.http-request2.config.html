<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>Configuration</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.http.http-request2.html" title="HTTP_Request2" />
  <link rel="prev" href="package.http.http-request2.intro.html" title="Introduction" />
  <link rel="next" href="package.http.http-request2.request.html" title="HTTP_Request2" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">Configuration</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.http.http-request2.intro.html" title="Introduction">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.http.http-request2.request.html" title="HTTP_Request2">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="package.http.http-request2.config">
 
  <h1 class="refname">Configuration</h1>
  <div class="refnamediv">Configuration &ndash; Configuration parameters for <strong class="classname">HTTP_Request2</strong></div>

 
 <div class="refsection" id="package.http.http-request2.config.table">
  <div class="info"><h1>List of Configuration Parameters</h1>
</div>
  <p class="para">
   <strong class="classname">HTTP_Request2</strong> <a href="http://pear.php.net/package/HTTP_Request2/docs/latest/HTTP_Request2/HTTP_Request2.html#method__construct" class="apidoclink">constructor</a> and <a href="http://pear.php.net/package/HTTP_Request2/docs/latest/HTTP_Request2/HTTP_Request2.html#methodsetConfig" class="apidoclink">HTTP_Request2::setConfig()</a> method accept the
   following configuration parameters. You can also use <a href="http://pear.php.net/package/HTTP_Request2/docs/latest/HTTP_Request2/HTTP_Request2.html#methodgetConfig" class="apidoclink">HTTP_Request2::getConfig()</a> to get the values of these parameters. Note that using
   an unknown parameter name will result in an exception. 
   </p><table class="doctable table">
    <caption>Common parameters</caption>
    
     <thead>
      <tr>
       <th>Parameter name</th>
       <th>Description</th>
       <th>Expected type</th>
       <th>Default value</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr style="vertical-align: top;">
       <td><code class="literal">adapter</code></td>
       <td>Adapter to use, may also be set by <a href="http://pear.php.net/package/HTTP_Request2/docs/latest/HTTP_Request2/HTTP_Request2.html#methodsetAdapter" class="apidoclink">HTTP_Request2::setAdapter()</a> method. (See: <a href="package.http.http-request2.adapters.html" class="xref">Adapters</a>)</td>
       <td><span class="type">string</span>|<span class="type">object</span></td>
       <td><code class="literal">&#039;HTTP_Request2_Adapter_Socket&#039;</code></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">connect_timeout</code></td>
       <td>Connection timeout in seconds. Exception will be thrown if connecting to remote host
        takes more than this number of seconds.</td>
       <td><span class="type">integer</span></td>
       <td><code class="literal">10</code></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">timeout</code></td>
       <td>Total number of seconds a request can take. Use <code class="literal">0</code> for no limit,
        should be greater than <code class="literal">connect_timeout</code> if set. Exception will be thrown
        if execution of <a href="http://pear.php.net/package/HTTP_Request2/docs/latest/HTTP_Request2/HTTP_Request2.html#methodsend" class="apidoclink">HTTP_Request2::send()</a>
        takes more than this number of seconds.</td>
       <td><span class="type">integer</span></td>
       <td><code class="literal">0</code></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">use_brackets</code></td>
       <td>Whether to append [] to array variable names. This is useful when performing a request
       to a remote PHP page which expects array parameters to have brackets, should be turned off in
       the other cases.</td>
       <td><span class="type">boolean</span></td>
       <td><strong class="constant">TRUE</strong></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">protocol_version</code></td>
       <td>HTTP protocol version to use, <code class="literal">&#039;1.0&#039;</code> or <code class="literal">&#039;1.1&#039;</code></td>
       <td><span class="type">string</span></td>
       <td><code class="literal">&#039;1.1&#039;</code></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">buffer_size</code></td>
       <td>Buffer size to use for reading and writing. Leave this at the default unless you know
        what you are doing.</td>
       <td><span class="type">integer</span></td>
       <td><code class="literal">16384</code></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">store_body</code></td>
       <td>Whether to store response body in response object. Set to false if receiving a huge
        response and using an Observer to save it. (See: <a href="package.http.http-request2.observers.html" class="xref">Observers</a>)
       </td>
       <td><span class="type">boolean</span></td>
       <td><strong class="constant">TRUE</strong></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">digest_compat_ie</code></td>
       <td>Whether to imitate behaviour of MSIE 5 and 6 in using URL without query string in digest
        authentication</td>
       <td><span class="type">boolean</span></td>
       <td><strong class="constant">FALSE</strong></td>
      </tr>

      <tr>
       <td><code class="literal">local_ip</code></td>
       <td>Specifies the IP address that will be used for accessing the network, if the computer
        running <strong class="classname">HTTP_Request2</strong> has more than one 
        (since <em class="emphasis">2.2.0</em>)</td>
       <td><span class="type">string</span></td>
       <td><strong class="constant">NULL</strong></td>
      </tr>

     </tbody>
    
   </table>


   <table class="doctable table">
    <caption>Redirect parameters</caption>
    
     <thead>
      <tr>
       <th>Parameter name</th>
       <th>Description</th>
       <th>Expected type</th>
       <th>Default value</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr style="vertical-align: top;">
       <td><code class="literal">follow_redirects</code></td>
       <td>Whether to automatically follow HTTP redirects in server response</td>
       <td><span class="type">boolean</span></td>
       <td><strong class="constant">FALSE</strong></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">max_redirects</code></td>
       <td>Maximum number of redirects to follow</td>
       <td><span class="type">integer</span></td>
       <td><code class="literal">5</code></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">strict_redirects</code></td>
       <td>Whether to keep request method on redirects via status 301 and
        302 (<strong class="constant">TRUE</strong>, needed for compatibility with <a href="http://www.faqs.org/rfcs/rfc2616" class="link external">RFC 2616</a>) or switch to <code class="literal">GET</code>
        (<strong class="constant">FALSE</strong>, needed for compatibility with most browsers). <a href="package.http.http-request2.adapters.html#package.http.http-request2.adapters.curl" class="link">Issues with Curl Adapter</a></td>
       <td><span class="type">boolean</span></td>
       <td><strong class="constant">FALSE</strong></td>
      </tr>

     </tbody>
    
   </table>


   <table class="doctable table">
    <caption>Proxy parameters</caption>
    
     <thead>
      <tr>
       <th>Parameter name</th>
       <th>Description</th>
       <th>Expected type</th>
       <th>Default value</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr style="vertical-align: top;">
       <td><code class="literal">proxy</code></td>
       <td>Proxy configuration given as an URL, e.g.
        <code class="literal">&#039;socks5://localhost:1080&#039;</code>, URL is parsed and separate parameters
        described below are set (since <em class="emphasis">2.1.0</em>)</td>
       <td><span class="type">string</span></td>
       <td>N/A</td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">proxy_type</code></td>
       <td>Proxy type, either <code class="literal">&#039;http&#039;</code> or <code class="literal">&#039;socks5&#039;</code> (since
        <em class="emphasis">2.1.0</em>)</td>
       <td><span class="type">string</span></td>
       <td><code class="literal">&#039;http&#039;</code></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">proxy_host</code></td>
       <td>Proxy server host</td>
       <td><span class="type">string</span></td>
       <td><code class="literal">&#039;&#039;</code></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">proxy_port</code></td>
       <td>Proxy server port</td>
       <td><span class="type">integer</span></td>
       <td><code class="literal">&#039;&#039;</code></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">proxy_user</code></td>
       <td>User name for proxy authentication</td>
       <td><span class="type">string</span></td>
       <td><code class="literal">&#039;&#039;</code></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">proxy_password</code></td>
       <td>Password for proxy authentication</td>
       <td><span class="type">string</span></td>
       <td><code class="literal">&#039;&#039;</code></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">proxy_auth_scheme</code></td>
       <td>Proxy authentication scheme, one of <strong class="constant">HTTP_Request2::AUTH_*</strong> constants</td>
       <td><span class="type">string</span></td>
       <td><strong class="constant">HTTP_Request2::AUTH_BASIC</strong></td>
      </tr>

     </tbody>
    
   </table>


   <table class="doctable table">
    <caption>SSL parameters</caption>
    
     <thead>
      <tr>
       <th>Parameter name</th>
       <th>Description</th>
       <th>Expected type</th>
       <th>Default value</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr style="vertical-align: top;">
       <td><code class="literal">ssl_verify_peer</code></td>
       <td>Whether to verify peer&#039;s SSL certificate. Note that this is on by default, to follow
        the behaviour of modern browsers and current cURL version.
        <blockquote class="note"><span class="simpara">
         Peer verification <a href="package.http.http-request2.config.html#package.http.http-request2.config.ssl" class="link">is likely to fail</a>
         if you don&#039;t explicitly provide <code class="literal">ssl_cafile</code> and/or <code class="literal">ssl_capath</code>,
         especially with <strong class="classname">Socket</strong> adapter.
        </span></blockquote>

       </td>
       <td><span class="type">boolean</span></td>
       <td><strong class="constant">TRUE</strong></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">ssl_verify_host</code></td>
       <td>Whether to check that Common Name in SSL certificate matches host name. <a href="package.http.http-request2.adapters.html#package.http.http-request2.adapters.socket" class="link">Issues with Socket Adapter.</a></td>
       <td><span class="type">boolean</span></td>
       <td><strong class="constant">TRUE</strong></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">ssl_cafile</code></td>
       <td>Certificate Authority file to verify the peer with (use when
        <code class="literal">ssl_verify_peer</code> is <strong class="constant">TRUE</strong>)
        <blockquote class="note"><span class="simpara">
         You can use e.g. <a href="http://curl.haxx.se/docs/caextract.html" class="link external">cURL&#039;s CA Extract tool</a> to get such a file. 
        </span></blockquote>

       </td>
       <td><span class="type">string</span></td>
       <td><strong class="constant">NULL</strong></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">ssl_capath</code></td>
       <td>Directory holding multiple Certificate Authority files</td>
       <td><span class="type">string</span></td>
       <td><strong class="constant">NULL</strong></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">ssl_local_cert</code></td>
       <td>Name of a file containing local certificate</td>
       <td><span class="type">string</span></td>
       <td><strong class="constant">NULL</strong></td>
      </tr>

      <tr style="vertical-align: top;">
       <td><code class="literal">ssl_passphrase</code></td>
       <td>Passphrase with which local certificate was encoded</td>
       <td><span class="type">string</span></td>
       <td><strong class="constant">NULL</strong></td>
      </tr>

     </tbody>
    
   </table>


  
 </div>
 
 <div class="refsection" id="package.http.http-request2.config.proxy">
  <div class="info"><h1>Proxy Configuration</h1>
</div>
  <p class="para">
   While most of the configuration parameters have sane default values and generally can be left
   alone, you&#039;ll definitely need to configure proxy you are using to access websites.
  </p>
  <div class="example">
   <p><strong>Proxy configuration example</strong></p>
   <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'HTTP/Request2.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$request&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">HTTP_Request2</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$request</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setConfig</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'proxy_host'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'proxy.example.com'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'proxy_port'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3128</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'proxy_user'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'luser'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'proxy_password'&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'sekret'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'proxy_auth_scheme'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">HTTP_Request2</span><span style="color: #007700">::</span><span style="color: #0000BB">AUTH_DIGEST<br /></span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;Now&nbsp;you&nbsp;can&nbsp;perform&nbsp;requests<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
  </div>
 </div>

 <div class="refsection" id="package.http.http-request2.config.ssl">
  <div class="info"><h1>SSL peer verification issues</h1>
</div>
  <p class="para">
   For SSL peer verification to work, OpenSSL library (used under the hood by both Curl and
   Socket adapter) needs <a href="http://en.wikipedia.org/wiki/Certificate_authority" class="link external">certificate authority</a> files. However it does
   not include any such files itself, expecting OS distributions compiling OpenSSL library
   to provide proper default locations.
  </p>
  <p class="para">
   Unfortunately OpenSSL extension of PHP below version 5.6 <em class="emphasis">does not</em>
   try to use the distribution-default values for CA file / CA path when explicit ones
   are not provided. Curl extension, however, does use these defaults, so you can sometimes
   be able to use <code class="literal">&#039;verify_peer&#039;</code> without setting <code class="literal">&#039;ssl_cafile&#039;</code>
   for Curl adapter, but not for Socket one (see e.g. <a href="http://pear.php.net/bugs/bug.php?id=18480" class="link external">bug #18480</a> and <a href="http://pear.php.net/bugs/bug.php?id=19351" class="link external">bug #19351</a>).
  </p>
  <p class="para">
   For versions of PHP below 5.6 the only solution is to provide <code class="literal">&#039;ssl_cafile&#039;</code> 
   and / or <code class="literal">&#039;ssl_capath&#039;</code> for every request if using 
   <strong class="classname">Socket</strong> adapter. <strong class="classname">Curl</strong> adapter will or
   will not be able to use the defaults depending on distribution, additionally you can set
   <code class="varname">curl.cainfo</code> parameter in <code class="filename">php.ini</code> on PHP 5.3.7+ 
   (it contains the default value for <strong class="constant">CURLOPT_CAINFO</strong> setting to which 
   <code class="literal">&#039;ssl_cafile&#039;</code> setting is mapped).
  </p>
  <p class="para">
   PHP version 5.6 will <em class="emphasis">finally</em> <a href="https://wiki.php.net/rfc/tls-peer-verification" class="link external">enable peer verification by default</a>
   for <code class="literal">&#039;ssl&#039;</code> stream wrapper, so it will also provide more possibilities for 
   using default values:
   </p><ul class="itemizedlist">
    <li class="listitem"><span class="simpara">
     PHP will use defaults compiled into the OpenSSL library by distribution.
    </span></li>
    <li class="listitem"><span class="simpara">
     <code class="varname">openssl.cafile</code> and <code class="varname">openssl.capath</code> settings in 
     <code class="filename">php.ini</code> will provide default values for <code class="literal">&#039;cafile&#039;</code>
     and <code class="literal">&#039;capath&#039;</code> SSL stream context options (<code class="literal">&#039;ssl_cafile&#039;</code>
     and <code class="literal">&#039;ssl_capath&#039;</code> settings map to these in <strong class="classname">Socket</strong> adapter).
    </span></li>
   </ul>
  
 </div>

</div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.http.http-request2.intro.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.http.http-request2.html">HTTP_Request2</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.http.http-request2.request.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Introduction</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">HTTP_Request2</td>
  </tr>
 </table>
</div>
</body></html>
