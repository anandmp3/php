<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    	<meta charset="UTF-8" />
		<meta name="keywords" content="yii framework, extension, Others, search engine ActiveRecord xunsearch" />
	<meta name="description" content="xunsearch php sdk, yii1 extension and yii2 ActiveRecord support" />
    <link rel="shortcut icon" type="image/x-icon" href="http://static.yiiframework.com/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="http://static.yiiframework.com/css/site-20130404102234.css" />

	<link title="Lives News for Yii Framework" rel="alternate" type="application/rss+xml" href="http://www.yiiframework.com/rss.xml/" />
	<title>yii-xunsearch | Extension | Yii PHP Framework</title>
	<link rel="search" type="application/opensearchdescription+xml" title="Yii API Search" href="/search-api.xml" />
	<link rel="search" type="application/opensearchdescription+xml" title="Yii Site Search" href="/search-site.xml" />
</head>

<body class="mac">
<div class="layout-main">

	<div class="layout-main-shortcuts">
		<div class="container_12">
            <a style="color:darkred;" href="https://github.com/yiisoft/yii2">Github</a> &middot;
            <a style="color:darkgreen;" href="https://twitter.com/yiiframework">Twitter</a> &middot;
            <a style="color:darkblue;" href="https://www.facebook.com/groups/yiitalk/">Facebook</a> &middot;
            <a href="/doc/guide/">Guide</a> &middot;
            <a href="/doc/api/">Class Reference</a> &middot;
            <a href="/doc-2.0/guide-index.html">Guide 2.0</a> &middot;
            <a href="/doc-2.0/index.html">API 2.0</a> &middot;
            <a href="/wiki/">Wiki</a> &middot;
            <a href="/extensions/">Extensions</a> &middot;
            <a href="/forum/">Forum</a> &middot;
			<a href="/chat/">Live Chat</a> &middot;
                            <a href="/login/">Login</a>            		</div>
	</div>

	<div class="layout-main-bg">
		<div class="layout-main-header">
			<div class="container_12">
				<div class="grid_4">
					<a class="logo" href="/"><img alt="Yii Logo" src="http://static.yiiframework.com/css/img/logo.png" title="Yii Framework" width="284" height="64" /></a>				</div>
				<div class="grid_8 omega">
					<div class="nav">
						<ul class="menu" id="yw0">
<li class="about"><a class="main" href="/about/">About</a>
<ul>
<li><a href="/about/">About Yii</a></li>
<li><a href="/features/">Features</a></li>
<li><a href="/performance/">Performance</a></li>
<li><a href="/license/">License</a></li>
<li class="last"><a href="/contact/">Contact Us</a></li>
</ul>
</li>
<li class="downloads active"><a class="main" href="/download/">Downloads</a>
<ul>
<li><a href="/download/">Framework</a></li>
<li class="active"><a href="/extensions/">Extensions</a></li>
<li><a href="/demos/">Demos</a></li>
<li class="last"><a href="/logo/">Logo</a></li>
</ul>
</li>
<li class="documentation"><a class="main" href="/doc/">Documentation</a>
<ul>
<li><a href="/tour/">Take the Tour</a></li>
<li><a href="/tutorials/">Tutorials</a></li>
<li><a href="/doc/api/">Class Reference</a></li>
<li><a href="/doc-2.0/guide-index.html">Guide 2.0</a></li>
<li><a href="/doc-2.0/index.html">Class Reference 2.0</a></li>
<li><a href="/wiki/">Wiki</a></li>
<li><a href="/screencasts/">Screencasts</a></li>
<li class="last"><a href="/resources/">Resources</a></li>
</ul>
</li>
<li class="development"><a class="main" href="https://github.com/yiisoft/yii/commits/master">Development</a>
<ul>
<li><a href="/contribute/">Contribute to Yii</a></li>
<li><a href="https://github.com/yiisoft/yii/commits/master">Latest Updates</a></li>
<li><a href="https://github.com/yiisoft/yii/issues/new">Report a Bug</a></li>
<li class="last"><a href="/security/">Report a Security Issue</a></li>
</ul>
</li>
<li class="community last"><a class="main" href="/community/">Community</a>
<ul>
<li><a href="/forum/">Forum</a></li>
<li><a href="/chat/">Live Chat</a></li>
<li><a href="/news/">News</a></li>
<li><a href="/user/halloffame/">Hall of Fame</a></li>
<li class="last"><a href="/badges/">Badges</a></li>
</ul>
</li>
</ul>						<div class="search">
							<form method="get" action="/search/">
								<div class="keyword">
	                                <input name="q" value="" />
									<a href="#" title="search" class="global-search">search</a>
								</div>
							</form>
						</div>
					</div>
				</div>
				<div class="clear"></div>
			</div>
		</div>

		<div class="container_12">
						<div class="grid_12">
												<div class="layout-main-submenu">
					<ul>
						<li class="main">Downloads</li>
												<li><a href="/download/">Framework</a></li>
												<li class="active"><a href="/extensions/">Extensions</a></li>
												<li><a href="/demos/">Demos</a></li>
												<li><a href="/logo/">Logo</a></li>
											</ul>
				</div>
				
				
				
								<div class="grid_9 alpha">
									<div class="layout-main-body">
						<div class="extension-view">
    	<h1>yii-xunsearch <a href="https://twitter.com/yiiframework" class="twitter-follow-button" data-link-color="#0069D6" data-show-count="true">Follow @yiiframework</a></h1>

	<div class="tagline">xunsearch php sdk, yii1 extension and yii2 ActiveRecord support</div>

	<div class="g-voter-reporter">
		<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Extension&amp;id=1822"><span>report it</span></a>		<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Extension&amp;id=1822&amp;vote=1"><span>0</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Extension&amp;id=1822&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>	</div>
	<div class="g-starring">
		<span class="widget-follower"><a class="g-login" title="Click to follow" href="/site/star/?type=Extension&amp;id=1822&amp;v=1"><img alt="Click to follow" src="/images/star_off.gif" title="" width="15" height="15" /></a><span>1 follower</span></span>	</div>
	<div class="clear"></div>

	<div class="content g-markdown"><div class="google-ad" style="float:right;margin:0 0 1em 1em;">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-3732587985864947";
google_ad_slot = "7504392189";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
		<div class="toc"><div class="ref level-2"><a href="#hh0">Composer 支持</a></div>
<div class="ref level-3"><a href="#hh1">安装</a></div>
<div class="ref level-3"><a href="#hh2">命令行工具</a></div>
<div class="ref level-3"><a href="#hh3">Yii-1.x 用法</a></div>
<div class="ref level-3"><a href="#hh4">Yii-2.x 用法</a></div>
<div class="ref level-2"><a href="#hh5">Resources</a></div></div>
<h2 id="hh0">Composer 支持 <a class="anchor" href="#hh0">¶</a></h2>

<p>自 v1.4.9 起，通过 subtree 功能将 xs-sdk-php 分离成为一个只读的子仓库，
以支持通过 <a href="https://getcomposer.org">composer</a> 安装。我们的包名称为
<code>hightman/xunsearch</code>，内含全部 PHP-SDK 的库文件，还包括支持 Yii 的扩展类。</p>

<h3 id="hh1">安装 <a class="anchor" href="#hh1">¶</a></h3>

<p>和绝大多数 composer 一样，你可以通过以下两种方法中的任意一种安装。</p>

<p>可以直接运行</p>

<pre>composer require --prefer-dist hightman/xunsearch "*@beta"
</pre>

<p>或者将以下内容添加到您的项目根目录 <code>composer.json</code> 中的 <code>require</code> 章节，
然后运行 <code>composer install</code></p>

<pre>"hightman/xunsearch": "*@beta"
</pre>

<blockquote class="tip">
<p><strong>Tip:</strong> 如果您打算用代码仓库中的最新版本，请将星号改为 dev-master。</p>
</blockquote>

<h3 id="hh2">命令行工具 <a class="anchor" href="#hh2">¶</a></h3>

<pre>vendor/bin/xs help
</pre>

<h3 id="hh3">Yii-1.x 用法 <a class="anchor" href="#hh3">¶</a></h3>

<p>这是对 xunsearch 的一个简单封装，使之更适合 yii-1.x 的用法习惯。首先，
在应用入口文件最开头引入 composer 的 autoload 文件，通常是 index.php。</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-reserved">require_once</span> <span class="hl-quotes">'</span><span class="hl-string">vendor/autoload.php</span><span class="hl-quotes">'</span><span class="hl-code">;
</span><span class="hl-comment">//</span><span class="hl-comment"> 如有必要请定义常量 XS_APP_ROOT 表示项目文件存放路径</span>
<span class="hl-comment">//</span><span class="hl-comment">define ('XS_APP_ROOT', dirname(__FILE__) . '/protected/data');</span></pre></div></div>

<p>在应用配置文件的 <code>compnents</code> 中添加以下代码，通常是 protected/config/main.php</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-comment">//</span><span class="hl-comment"> application components</span>
    <span class="hl-quotes">'</span><span class="hl-string">components</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-reserved">array</span><span class="hl-brackets">(</span>
        <span class="hl-comment">//</span><span class="hl-comment"> ... other components ... </span>
        <span class="hl-quotes">'</span><span class="hl-string">search</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-reserved">array</span><span class="hl-brackets">(</span>
            <span class="hl-quotes">'</span><span class="hl-string">class</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">EXunSearch</span><span class="hl-quotes">'</span><span class="hl-code">,
            </span><span class="hl-quotes">'</span><span class="hl-string">project</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">demo</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-comment">//</span><span class="hl-comment"> 搜索项目名称或对应的 ini 文件路径</span>
            <span class="hl-quotes">'</span><span class="hl-string">charset</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">utf-8</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-comment">//</span><span class="hl-comment"> 您当前使用的字符集（索引、搜索结果）</span>
        <span class="hl-brackets">)</span><span class="hl-code">,  
    </span><span class="hl-brackets">)</span><span class="hl-code">,</span></pre></div></div>

<p>然后就可以通过 <code>Yii::app()-&gt;search</code> 来访问 <code>EXunSearch</code> 对象，进行索引管理或检索。</p>

<p>添加、修改索引数据，使用方法参照 <a href="http://www.xunsearch.com/doc/php/api/XSIndex">XSIndex</a>。
对于 ActiveRecord 对象来讲，建议在相关的 <code>afterSave</code> 和 <code>afterDelete</code> 中进行索引同步。</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-var">$data</span><span class="hl-code"> = </span><span class="hl-reserved">array</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">pid</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-number">1234</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">subject</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">标题</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">message</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">内容</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">app</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">search</span><span class="hl-code">-&gt;</span><span class="hl-identifier">add</span><span class="hl-brackets">(</span><span class="hl-var">$data</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> 添加文档</span>
<span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">app</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">search</span><span class="hl-code">-&gt;</span><span class="hl-identifier">update</span><span class="hl-brackets">(</span><span class="hl-var">$data</span><span class="hl-brackets">)</span><span class="hl-code">;  </span><span class="hl-comment">//</span><span class="hl-comment"> 更新文档</span>
<span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">app</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">search</span><span class="hl-code">-&gt;</span><span class="hl-identifier">del</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">1234</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;    </span><span class="hl-comment">//</span><span class="hl-comment"> 删除文档</span></pre></div></div>

<p>使用检索功能时，可以将 <code>Yii::app()-&gt;search</code> 当作 <a href="http://www.xunsearch.com/doc/php/api/XSSearch">XSSearch</a> 对象一样直接使用它的全部方法。</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">app</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">search</span><span class="hl-code">-&gt;</span><span class="hl-identifier">setQuery</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">subject:标题</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-var">$docs</span><span class="hl-code"> = </span><span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">app</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">search</span><span class="hl-code">-&gt;</span><span class="hl-identifier">setLimit</span><span class="hl-brackets">(</span><span class="hl-number">5</span><span class="hl-code">, </span><span class="hl-number">10</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">search</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;  </span><span class="hl-comment">//</span><span class="hl-comment"> 取得搜索结果文档集</span></pre></div></div>

<h3 id="hh4">Yii-2.x 用法 <a class="anchor" href="#hh4">¶</a></h3>

<p>在 yii2 中，除了提供类似 yii-1.x 的调用方式外，我们还支持 ActiveRecord 方式来操作。首先，
请在应用配置文件的 <code>components</code> 中添加以下代码，通常是 <code>config/web.php</code></p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-comment">//</span><span class="hl-comment"> application components</span>
    <span class="hl-quotes">'</span><span class="hl-string">components =&gt; [
        // ... other components ...
        </span><span class="hl-quotes">'</span><span class="hl-identifier">xunsearch</span><span class="hl-quotes">'</span><span class="hl-string"> =&gt; [
            </span><span class="hl-quotes">'</span><span class="hl-reserved">class</span><span class="hl-quotes">'</span><span class="hl-string"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-identifier">hightman</span><span class="hl-code">\</span><span class="hl-identifier">xunsearch</span><span class="hl-code">\</span><span class="hl-identifier">Connection</span><span class="hl-quotes">'</span><span class="hl-string">, // 此行必须
            </span><span class="hl-quotes">'</span><span class="hl-identifier">iniDirectory</span><span class="hl-quotes">'</span><span class="hl-string"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-code">@</span><span class="hl-identifier">app</span><span class="hl-code">/</span><span class="hl-identifier">config</span><span class="hl-quotes">'</span><span class="hl-string">,    // 搜索 ini 文件目录，默认：@vendor/hightman/xunsearch/app
            </span><span class="hl-quotes">'</span><span class="hl-identifier">charset</span><span class="hl-quotes">'</span><span class="hl-string"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-identifier">utf</span><span class="hl-code">-</span><span class="hl-number">8</span><span class="hl-quotes">'</span><span class="hl-string">,   // 指定项目使用的默认编码，默认即时 utf-8，可不指定
        ],
    ],</span></pre></div></div>

<p>接下来，你可以通过以下代码获取到 <code>hightman\xunsearch\Database</code> 对象，该对像和 yii-1.x 的
<code>EXunSearch</code> 用法很相似，通过魔术方法，能够依次检索以下对象的方法列表而直接调用：</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-var">$db</span><span class="hl-code"> = \</span><span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-var">$app</span><span class="hl-code">-&gt;</span><span class="hl-identifier">xunsearch</span><span class="hl-code">-&gt;</span><span class="hl-identifier">getDatabase</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">demo</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-var">$db</span><span class="hl-code"> = \</span><span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-var">$app</span><span class="hl-code">-&gt;</span><span class="hl-identifier">xunsearch</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">demo</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-var">$xs</span><span class="hl-code"> = </span><span class="hl-var">$db</span><span class="hl-code">-&gt;</span><span class="hl-identifier">xs</span><span class="hl-code">;
</span><span class="hl-var">$search</span><span class="hl-code"> = </span><span class="hl-var">$db</span><span class="hl-code">-&gt;</span><span class="hl-identifier">getSearch</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-var">$index</span><span class="hl-code"> = </span><span class="hl-var">$db</span><span class="hl-code">-&gt;</span><span class="hl-identifier">getIndex</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre></div></div>

<ul><li><a href="http://www.xunsearch.com/doc/php/api/XS">XS</a> 优先调用该对象方法，如有必要，可直接通过 <code>hightman\xunsearch\Database::$xs</code> 属性访问。</li>
<li><a href="http://www.xunsearch.com/doc/php/api/XSIndex">XSIndex</a> 紧接着检查索引管理方法，如有必要，可直接通过 <code>hightman\xunsearch\Database::$index</code> 属性访问。</li>
<li><a href="http://www.xunsearch.com/doc/php/api/XSSearch">XSSearch</a> 紧接着检查索引管理方法，如有必要，可直接通过 <code>hightman\xunsearch\Database::$search</code> 属性访问。</li>
</ul><p>具体用法不再赘述，下面重点讲讲如何通过 ActiveRecord 方法来检索和创建索引，由于遵循 yii2 的思想进行开发设计，
使用起来非常方便和简单。</p>

<h4>创建 AR 对象</h4>

<p>首先必须创建一个继承自 <code>hightman\xunsearch\ActiveRecord</code> 的模型类，默认情况下会以全小写的类名字作为
ini 文件名。如需指定，请自行覆盖编写 <code>hightman\xunsearch\ActiveRecord::projectName()</code>。通常代码如下：</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-reserved">class</span> <span class="hl-identifier">Demo</span> <span class="hl-reserved">extends</span><span class="hl-code"> \</span><span class="hl-identifier">hightman</span><span class="hl-code">\</span><span class="hl-identifier">xunsearch</span><span class="hl-code">\</span><span class="hl-identifier">ActiveRecord</span>
<span class="hl-brackets">{</span>
    <span class="hl-comment">/*</span><span class="hl-comment">public static function projectName() {
        return 'another_name';  // 这将使用 @app/config/another_name.ini 作为项目名
    }</span><span class="hl-comment">*/</span>
<span class="hl-brackets">}</span></pre></div></div>

<p>由此可见，如果命名规范模型类几乎不需要任何额外代码，上述代码会自动采用 <code>demo.ini</code> 并自动装载字段配置。</p>

<h4>添加或更新索引</h4>

<p>为避免数据重复，底层统一通过 <code>XSIndex::update()</code> 方法进行提交的。</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-comment">//</span><span class="hl-comment"> 添加索引，也可以通过 $model-&gt;setAttributes([...]) 批量赋值</span>
<span class="hl-var">$model</span><span class="hl-code"> = </span><span class="hl-reserved">new</span> <span class="hl-identifier">Demo</span><span class="hl-code">;
</span><span class="hl-var">$model</span><span class="hl-code">-&gt;</span><span class="hl-identifier">pid</span><span class="hl-code"> = </span><span class="hl-number">321</span><span class="hl-code">;
</span><span class="hl-var">$model</span><span class="hl-code">-&gt;</span><span class="hl-identifier">subject</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">hello world</span><span class="hl-quotes">'</span><span class="hl-code">;
</span><span class="hl-var">$model</span><span class="hl-code">-&gt;</span><span class="hl-identifier">message</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">just for testing...</span><span class="hl-quotes">'</span><span class="hl-code">;
</span><span class="hl-var">$model</span><span class="hl-code">-&gt;</span><span class="hl-identifier">save</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-comment">//</span><span class="hl-comment"> 更新索引</span>
<span class="hl-var">$model</span><span class="hl-code"> = </span><span class="hl-identifier">Demo</span><span class="hl-code">::</span><span class="hl-identifier">findOne</span><span class="hl-brackets">(</span><span class="hl-number">321</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-var">$model</span><span class="hl-code">-&gt;</span><span class="hl-identifier">message</span><span class="hl-code"> .= </span><span class="hl-quotes">'</span><span class="hl-string"> + updated</span><span class="hl-quotes">'</span><span class="hl-code">;
</span><span class="hl-var">$model</span><span class="hl-code">-&gt;</span><span class="hl-identifier">save</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
 
 
</span><span class="hl-comment">//</span><span class="hl-comment"> 添加或更新索引还支持以方法添加索引词或文本</span>
<span class="hl-comment">//</span><span class="hl-comment"> 这样做的目的是使得可以通过这些关键词检索到数据，但并非数据的字段值</span>
<span class="hl-comment">//</span><span class="hl-comment"> 用法与 XSDocument::addTerm() 和 XSDocument::addIndex() 等同</span>
<span class="hl-comment">//</span><span class="hl-comment"> 通常在 ActiveRecord::beforeSave() 中做这些操作</span>
<span class="hl-var">$model</span><span class="hl-code">-&gt;</span><span class="hl-identifier">addTerm</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">subject</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">hi</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-var">$model</span><span class="hl-code">-&gt;</span><span class="hl-identifier">addIndex</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">subject</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">你好，世界</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-comment">//</span><span class="hl-comment"> 如需删除数据则可直接</span>
<span class="hl-var">$model</span><span class="hl-code">-&gt;</span><span class="hl-identifier">delete</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre></div></div>

<p>如需要做批量删除或更新，请参见以下代码文档：<code>ActiveRecord::updateAll()</code> 和 <code>ActiveRecord::deleteAll()</code>。</p>

<h4>检索对象</h4>

<p>重点先介绍一下 <code>ActiveQuery::where()</code> 系列搜索条件函数的用法，和 yii2 其它的 ActiveRecord 类似：</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-var">$query</span><span class="hl-code"> = </span><span class="hl-identifier">Demo</span><span class="hl-code">::</span><span class="hl-identifier">find</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> 返回 ActiveQuery 对象</span>
<span class="hl-var">$condition</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">hello world</span><span class="hl-quotes">'</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> 字符串原样保持，可包含 subject:xxx 这种形式</span>
<span class="hl-var">$condition</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">WILD</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">key1</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">key2</span><span class="hl-quotes">'</span><span class="hl-code"> ... </span><span class="hl-brackets">]</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> 通过空格将多个查询条件连接</span>
<span class="hl-var">$condition</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">AND</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">key1</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">key2</span><span class="hl-quotes">'</span><span class="hl-code"> ... </span><span class="hl-brackets">]</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> 通过 AND 连接，转换为：key1 AND key2</span>
<span class="hl-var">$condition</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">OR</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">key1</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">key2</span><span class="hl-quotes">'</span><span class="hl-code"> ... </span><span class="hl-brackets">]</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> 通过 OR 连接</span>
<span class="hl-var">$condition</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">XOR</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">key1</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">key2</span><span class="hl-quotes">'</span><span class="hl-code"> ... </span><span class="hl-brackets">]</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> 通过  XOR 连接</span>
<span class="hl-var">$condition</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">NOT</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">key</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> 排除匹配 key 的结果</span>
<span class="hl-var">$condition</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">pid</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">123</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">subject</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">hello</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> 转换为：pid:123 subject:hello</span>
<span class="hl-var">$condition</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">pid</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">123</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">456</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-brackets">]</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> 相当于 IN，转换为：pid:123 OR pid:456</span>
<span class="hl-var">$condition</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">IN</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">pid</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">123</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">456</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-brackets">]</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> 转换结果同上</span>
<span class="hl-var">$condition</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">NOT IN</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">pid</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">123</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">456</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-brackets">]</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> 转换为：NOT (pid:123 OR pid:456)</span>
<span class="hl-var">$condition</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">BETWEEN</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">chrono</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-number">14918161631</span><span class="hl-code">, </span><span class="hl-number">15918161631</span><span class="hl-brackets">]</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> 相当于 XSSearch::addRange(...)</span>
<span class="hl-var">$condition</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">WEIGHT</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">subject</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">hello</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-number">0</span><span class="hl-number">.5</span><span class="hl-brackets">]</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> 相当于额外调用 XSSearch::addWeight('subject', 'hello', 0.5);</span>
<span class="hl-var">$query</span><span class="hl-code">-&gt;</span><span class="hl-identifier">where</span><span class="hl-brackets">(</span><span class="hl-var">$condition</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre></div></div>

<p>对于 <code>hightman\xunsearch\ActiveQuery</code> 对象，主要支持以下几个方法获取和操作：</p>

<ul><li><strong>asArray()</strong>: 以数组形式返回数据</li>
<li><strong>one()</strong>: 返回一行数据</li>
<li><strong>all()</strong>: 返回全部数据</li>
<li><strong>count()</strong>: 统计数据匹配数据，是估算的并不是完全准确</li>
<li><strong>exists()</strong>: 判断查询条件是否存在数据</li>
<li><strong>where()</strong>: 指定搜索条件</li>
<li><strong>orderBy()</strong>: 指定排序方式，默认为相关性排序</li>
<li><strong>limit()</strong>, <strong>offfset()</strong>: 指定获取数据量和偏移，用于分页检索</li>
<li><strong>with()</strong>, <strong>indexBy</strong> ...</li>
<li><strong>buildOther(function(\XSSearch $search){})</strong> 可通过此方法定制检索选项</li>
</ul><p>此外，ActiveQuery 还提供了一个名为 <code>beforeSearch</code> 的事件，可在执行搜索前再次对 <code>ActiveQuery::getSearch()</code>
所返回的 <code>XSSearch</code> 对象进行调整。</p>

<p>如果以 AR 对象获得数据，可通过以下几个方法获取搜索结果元数据，参照 <code>XSDocument</code> 相关用法。</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-var">$model</span><span class="hl-code"> = </span><span class="hl-identifier">Demo</span><span class="hl-code">::</span><span class="hl-identifier">findOne</span><span class="hl-brackets">(</span><span class="hl-number">321</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-var">$model</span><span class="hl-code">-&gt;</span><span class="hl-identifier">docid</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment">Xapian数据 ID</span>
<span class="hl-var">$model</span><span class="hl-code">-&gt;</span><span class="hl-identifier">rank</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment">序号</span>
<span class="hl-var">$model</span><span class="hl-code">-&gt;</span><span class="hl-identifier">percent</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment">匹配百分比</span>
<span class="hl-var">$model</span><span class="hl-code">-&gt;</span><span class="hl-identifier">ccount</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment">折叠数量，须在 XSSearch::setCollapse() 指定后才有效</span>
<span class="hl-var">$model</span><span class="hl-code">-&gt;</span><span class="hl-identifier">matched</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment">获得匹配词汇</span></pre></div></div>

<p>ActiveRecord 对象实现了绝大多数据接口，完全可以像使用普通数据库模型一样使用它。如果需要
访问原始的 xunsearch 对象，请通过以下方式获取 <code>Database</code> 对象：</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-var">$db</span><span class="hl-code"> = </span><span class="hl-identifier">Demo</span><span class="hl-code">::</span><span class="hl-identifier">getDb</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-var">$search</span><span class="hl-code"> = </span><span class="hl-var">$db</span><span class="hl-code">-&gt;</span><span class="hl-identifier">getSearch</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-var">$index</span><span class="hl-code"> = </span><span class="hl-var">$db</span><span class="hl-code">-&gt;</span><span class="hl-identifier">getIndex</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-comment">//</span><span class="hl-comment"> 如有必要，还可以获得 scws 分词对象</span>
<span class="hl-var">$scws</span><span class="hl-code"> = </span><span class="hl-var">$db</span><span class="hl-code">-&gt;</span><span class="hl-identifier">getScws</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre></div></div>

<h4>使用 xunsearch DebugPanel</h4>

<p>为便于调试，还提供了一个 <code>hightman\xunsearch\DebugPanel</code> 对象，可以集成到 debug 模块中，
可在调试工具条和面板中显示 <code>xunsearch</code> 有关的查询以及耗时情况。</p>

<p>要想启用这个很容易，只要在主配置文件中加入以下代码：</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-comment">//</span><span class="hl-comment"> ...</span>
    <span class="hl-quotes">'</span><span class="hl-string">bootstrap</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">debug</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-code">,
    </span><span class="hl-quotes">'</span><span class="hl-string">modules</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-brackets">[</span>
        <span class="hl-quotes">'</span><span class="hl-string">debug</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-brackets">[</span>
            <span class="hl-quotes">'</span><span class="hl-string">class</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">yii</span><span class="hl-special">\\</span><span class="hl-string">debug</span><span class="hl-special">\\</span><span class="hl-string">Module</span><span class="hl-quotes">'</span><span class="hl-code">,
            </span><span class="hl-quotes">'</span><span class="hl-string">panels</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-brackets">[</span>
                <span class="hl-quotes">'</span><span class="hl-string">xunsearch</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-brackets">[</span>
                    <span class="hl-quotes">'</span><span class="hl-string">class</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">hightman</span><span class="hl-special">\\</span><span class="hl-string">xunsearch</span><span class="hl-special">\\</span><span class="hl-string">DebugPanel</span><span class="hl-quotes">'</span><span class="hl-code">,
                </span><span class="hl-brackets">]</span><span class="hl-code">,
            </span><span class="hl-brackets">]</span><span class="hl-code">,
        </span><span class="hl-brackets">]</span><span class="hl-code">,
    </span><span class="hl-brackets">]</span><span class="hl-code">,
    </span><span class="hl-comment">//</span><span class="hl-comment"> ...</span></pre></div></div>

<h4>其它用法</h4>

<p>TBD. 如关联等，参见其它 AR 用法即可。</p>

<blockquote class="note">
<p><strong>Note:</strong> 相关的 AR 索引操作均非实时的，如需实时更新索引，请通过 <code>Database::getIndex()-&gt;flushIndex()</code> 刷新。
  关于查询日志有关的功能，也建议通过原生的 <code>XSSearch</code> 和 <code>XSIndex</code> 对象来操作。</p>
</blockquote>

<h2 id="hh5">Resources <a class="anchor" href="#hh5">¶</a></h2>

<ul><li><a href="https://github.com/hightman/xs-sdk-php">Project homepage</a></li>
</ul>	</div>

	<div class="google-ad" style="margin:10px 0 10px 200px;">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-3732587985864947";
google_ad_slot = "5681577484";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div><div class="widget-comment-list" id="comments">
	<div id="comment-add">
		<h3 id="add-comment">Be the first person to leave a comment</h3>

			<p>Please <a class="g-login" rel="/extension/yii-xunsearch/#add-comment" href="#">login</a> to leave your comment.</p>
		</div>
</div>
</div>

					</div>
								</div>
				
								<div class="grid_3 omega">
					<div class="layout-main-right">
						<div class="extension-portlets">
	<a href="/ext/create/" class="btn btn-success btn-large action">Create extension</a>

<div class="widget-search-box">
    <form method="get" action="/search/">
        <strong>Search Extensions</strong>
		<input type="text" name="q" class="keyword g-text" />
        <input type="hidden" name="type" value="extension" />
        <input type="hidden" name="lang" value="" />
        <input type="submit" value="Find" class="btn btn-info" />
	</form>
</div><div class="downloads">
    <strong>Downloads</strong>
        <div>
        <i>No downloadable files yet</i>
    </div>
    </div>
<ul class="info g-list-none">
    <li><b>Yii Version</b>: <b>all</b></li>
    <li><b>License</b>: <a target="_blank" rel="nofollow" href="http://www.opensource.org/licenses/gpl-2.0.php">GNU General Public License v2</a></li>
    <li><b>Developed by</b>: <a class="g-user-rank-link" href="/user/2233/">hightman</a></li>
    <li><b>Category</b>: <a href="/extensions/?category=14">Others</a></li>
    <li><b>Votes</b>: <i>No votes yet</i></li>
    <li><b>Downloaded</b>: 0 times</li>
    <li><b>Created on</b>: Dec 16, 2014</li>
    <li><b>Last updated</b>: Dec 16, 2014</li>
        <li><b>Tags</b>: <a href="/extensions/?tag=search+engine+ActiveRecord+xunsearch">search engine ActiveRecord xunsearch</a></li>
    </ul>

	<div class="google-ad" style="margin:100px 0 0 10px;">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-3732587985864947";
google_ad_slot = "9764720390";
google_ad_width = 160;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div>					</div>
				</div>
								<div class="clear"></div>
			</div>
			<div class="clear"></div>
					</div>
	</div>

	<div class="layout-main-footer">
		<div class="container_12">
			<div class="grid_6">
				<ul class="menu">
				<li class="main">About
<ul class="sub">
<li><a href="/about/">About Yii</a></li>
<li><a href="/features/">Features</a></li>
<li><a href="/performance/">Performance</a></li>
<li><a href="/license/">License</a></li>
<li><a href="/contact/">Contact Us</a></li>
</ul>
</li>
<li class="main">Downloads
<ul class="sub">
<li><a href="/download/">Framework</a></li>
<li><a href="/extensions/">Extensions</a></li>
<li><a href="/demos/">Demos</a></li>
<li><a href="/logo/">Logo</a></li>
</ul>
</li>
<li class="main">Documentation
<ul class="sub">
<li><a href="/tour/">Take the Tour</a></li>
<li><a href="/tutorials/">Tutorials</a></li>
<li><a href="/doc/api/">Class Reference</a></li>
<li><a href="/doc-2.0/guide-index.html">Guide 2.0</a></li>
<li><a href="/doc-2.0/index.html">Class Reference 2.0</a></li>
<li><a href="/wiki/">Wiki</a></li>
<li><a href="/screencasts/">Screencasts</a></li>
<li><a href="/resources/">Resources</a></li>
</ul>
</li>
<li class="main">Development
<ul class="sub">
<li><a href="/contribute/">Contribute to Yii</a></li>
<li><a href="https://github.com/yiisoft/yii/commits/master">Latest Updates</a></li>
<li><a href="https://github.com/yiisoft/yii/issues/new">Report a Bug</a></li>
<li><a href="/security/">Report a Security Issue</a></li>
</ul>
</li>
<li class="main">Community
<ul class="sub">
<li><a href="/forum/">Forum</a></li>
<li><a href="/chat/">Live Chat</a></li>
<li><a href="/news/">News</a></li>
<li><a href="/user/halloffame/">Hall of Fame</a></li>
<li><a href="/badges/">Badges</a></li>
</ul>
</li>
				</ul>
			</div>
			<div class="grid_1">&nbsp;</div>
			<div class="grid_5">
				<h3>Yii Supporters</h3>
				<ul class="g-list-none supporters">

				</ul>
			</div>

			<div class="clear"></div>
			<div class="grid_12 copyright">
				<ul class="social">
					<li class="twitter"><a href="https://twitter.com/yiiframework" target="_blank" rel="nofollow" title="follow us on twitter">Twitter</a></li>
					<li class="facebook"><a href="https://www.facebook.com/groups/yiitalk/" target="_blank" rel="nofollow" title="join yii group at facebook">Facebook</a></li>
					<li class="linkedin"><a href="http://www.linkedin.com/groups?gid=1483367" target="_blank" rel="nofollow" title="join yii group at linkedin">LinkedIn</a></li>
					<li class="feeds"><a title="RSS feeds" href="/rss.xml/">RSS Feeds</a></li>
				</ul>
				<div class="clear"></div>
				<a href="/tos/">Terms of Service</a> |
				<a href="/license/">License</a> |
				<a href="/contact/">Contact Us</a><br/>
				Copyright &copy; 2015 by <a href="http://www.yiisoft.com">Yii Software LLC</a>.
				All Rights Reserved.
			</div>
			<div class="clear"></div>
		</div>
	</div>
</div>

    <script type="text/javascript" src="/js/site-20121004195728.js"></script>


<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['site._setAccount', 'UA-5843896-1']);
_gaq.push(['site._trackPageview']);

(function() {
	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
<script type="text/javascript">
function trackClick(link, action, category) {
	action=action || link.href;
	category=category || 'Outbound Links';
	try {
		_gaq.push(['site._trackEvent', category, action]);
		setTimeout('document.location = "' + link.href + '"', 250);
	}catch(err){}
	return false;
}
</script>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
</body>
</html>
