<?xml version="1.0" encoding="UTF-8"?>
<rss xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0">
  <channel>
    <title><![CDATA[Live News for Yii Framework]]></title>
    <link>http://www.yiiframework.com</link>
    <description><![CDATA[]]></description>
    <pubDate>Fri, 09 Jan 2015 01:01:18 +0000</pubDate>
    <managingEditor>(Yii Software LLC)</managingEditor>
    <generator>Zend_Feed</generator>
    <language>en-US</language>
    <docs>http://blogs.law.harvard.edu/tech/rss</docs>
    <item>
      <title><![CDATA[[Extension] yii-sidr]]></title>
      <link>http://www.yiiframework.com/extension/yii-sidr/</link>
      <description><![CDATA[Yii Extension for the JQuery Sidr plugin]]></description>
      <pubDate>Mon, 29 Dec 2014 03:13:38 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Wiki] checkBox in CGridview]]></title>
      <link>http://www.yiiframework.com/wiki/781/checkbox-in-cgridview/</link>
      <description><![CDATA[<p>some when you need to add checkbox in cgridview and change state of selected rows by additianal parameters.
in view :</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-code">&lt;</span><span class="hl-identifier">div</span><span class="hl-code"> &gt;
&lt;?</span><span class="hl-identifier">php</span> 
 
    <span class="hl-reserved">echo</span> <span class="hl-quotes">'</span><span class="hl-string">  &lt;span&gt;change status to :&lt;span&gt;</span><span class="hl-quotes">'</span><span class="hl-code">.</span><span class="hl-identifier">CHtml</span><span class="hl-code">::</span><span class="hl-identifier">dropDownList</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">newStatus</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-number">0</span><span class="hl-code">,</span><span class="hl-identifier">CHtml</span><span class="hl-code">::</span><span class="hl-identifier">listData</span><span class="hl-brackets">(</span><span class="hl-var">$model</span><span class="hl-code">,</span><span class="hl-quotes">'</span><span class="hl-string">code_item_id</span><span class="hl-quotes">'</span><span class="hl-code">,</span><span class="hl-quotes">'</span><span class="hl-string">code_item_name</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">,</span><span class="hl-reserved">array</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">prompt</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-quotes">'</span><span class="hl-string">select status</span><span class="hl-quotes">'</span> <span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
 
    </span><span class="hl-reserved">echo</span> <span class="hl-identifier">CHtml</span><span class="hl-code">::</span><span class="hl-identifier">ajaxLink</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">edit</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-var">$this</span><span class="hl-code">-&gt;</span><span class="hl-identifier">createUrl</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">report/getvalue</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-reserved">array</span><span class="hl-brackets">(</span>
        <span class="hl-quotes">"</span><span class="hl-string">type</span><span class="hl-quotes">"</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">"</span><span class="hl-string">post</span><span class="hl-quotes">"</span><span class="hl-code">,
        </span><span class="hl-quotes">"</span><span class="hl-string">data</span><span class="hl-quotes">"</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">js:{theIds : $.fn.yiiGridView.getChecked("show-list","selectedIds").toString(),"status":$("#newStatus").val()}</span><span class="hl-quotes">'</span><span class="hl-code">,
        </span><span class="hl-quotes">"</span><span class="hl-string">success</span><span class="hl-quotes">"</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">js:function(data){ $.fn.yiiGridView.update("show-list")  }</span><span class="hl-quotes">'</span> <span class="hl-brackets">)</span><span class="hl-code">,</span><span class="hl-reserved">array</span><span class="hl-brackets">(</span>
        <span class="hl-quotes">'</span><span class="hl-string">class</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">btn btn-info</span><span class="hl-quotes">'</span>
        <span class="hl-brackets">)</span>
        <span class="hl-brackets">)</span><span class="hl-code">;
 
 
</span><span class="hl-inlinetags">?&gt;</span><span class="hl-code">
&lt;/</span><span class="hl-identifier">div</span><span class="hl-code">&gt;
 
 
&lt;</span><span class="hl-identifier">div</span> <span class="hl-identifier">id</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">tab_content</span><span class="hl-quotes">"</span><span class="hl-code"> &gt;
 
    &lt;?</span><span class="hl-identifier">php</span>
 
    <span class="hl-var">$this</span><span class="hl-code">-&gt;</span><span class="hl-identifier">widget</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">zii.widgets.grid.CGridView</span><span class="hl-quotes">'</span><span class="hl-code">,</span><span class="hl-reserved">array</span><span class="hl-brackets">(</span>
        <span class="hl-quotes">'</span><span class="hl-string">id</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">show-list</span><span class="hl-quotes">'</span><span class="hl-code">,
        </span><span class="hl-quotes">'</span><span class="hl-string">dataProvider</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-var">$model</span><span class="hl-code">-&gt;</span><span class="hl-identifier">search</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">,
 
        </span><span class="hl-quotes">'</span><span class="hl-string">columns</span><span class="hl-quotes">'</span><span class="hl-code">=&gt; </span><span class="hl-reserved">array</span><span class="hl-brackets">(</span>
            <span class="hl-reserved">array</span><span class="hl-brackets">(</span>
                <span class="hl-quotes">'</span><span class="hl-string">name</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">check</span><span class="hl-quotes">'</span><span class="hl-code">,
                </span><span class="hl-quotes">'</span><span class="hl-string">id</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">selectedIds</span><span class="hl-quotes">'</span><span class="hl-code">,
                </span><span class="hl-quotes">'</span><span class="hl-string">value</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">$data-&gt;order_id</span><span class="hl-quotes">'</span><span class="hl-code">,
                </span><span class="hl-quotes">'</span><span class="hl-string">class</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">CCheckBoxColumn</span><span class="hl-quotes">'</span><span class="hl-code">,
                </span><span class="hl-quotes">'</span><span class="hl-string">selectableRows</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">100</span><span class="hl-quotes">'</span><span class="hl-code">,
 
            </span><span class="hl-brackets">)</span><span class="hl-code">,
            </span><span class="hl-reserved">array</span><span class="hl-brackets">(</span>
            <span class="hl-quotes">'</span><span class="hl-string">name</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt;  </span><span class="hl-quotes">'</span><span class="hl-string">order_id</span><span class="hl-quotes">'</span><span class="hl-code">,
            </span><span class="hl-quotes">'</span><span class="hl-string">value</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">$data-&gt;order_id</span><span class="hl-quotes">'</span><span class="hl-code">,
            </span><span class="hl-brackets">)</span><span class="hl-code">,
 
            </span><span class="hl-reserved">array</span><span class="hl-brackets">(</span>
                <span class="hl-quotes">'</span><span class="hl-string">name</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt;  </span><span class="hl-quotes">'</span><span class="hl-string">order_total</span><span class="hl-quotes">'</span><span class="hl-code">,
                </span><span class="hl-quotes">'</span><span class="hl-string">value</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">$data-&gt;order_total</span><span class="hl-quotes">'</span><span class="hl-code">,
            </span><span class="hl-brackets">)</span><span class="hl-code">,
 
 
        </span><span class="hl-brackets">)</span>
    <span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
 
 
 
            </span><span class="hl-inlinetags">?&gt;</span><span class="hl-code">
&lt;/</span><span class="hl-identifier">div</span><span class="hl-code">&gt;</span></pre></div></div>

<p>in controller :</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-reserved">public</span> <span class="hl-reserved">function</span> <span class="hl-identifier">actionGetValue</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">{</span>
 
        <span class="hl-var">$arr</span><span class="hl-code"> = </span><span class="hl-identifier">explode</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">,</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-var">$_POST</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">theIds</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-var">$criteria</span><span class="hl-code"> = </span><span class="hl-reserved">new</span> <span class="hl-identifier">CDbCriteria</span><span class="hl-code">;
        </span><span class="hl-var">$criteria</span><span class="hl-code">-&gt;</span><span class="hl-identifier">addInCondition</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">order_id</span><span class="hl-quotes">'</span><span class="hl-code"> ,</span><span class="hl-var">$arr</span> <span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-var">$model</span><span class="hl-code"> = </span><span class="hl-identifier">PurchaseOrders</span><span class="hl-code">::</span><span class="hl-identifier">model</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">findAll</span><span class="hl-brackets">(</span><span class="hl-var">$criteria</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">foreach</span> <span class="hl-brackets">(</span><span class="hl-var">$model</span> <span class="hl-reserved">as</span> <span class="hl-var">$value</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
            <span class="hl-comment">//</span><span class="hl-comment">update Order`s Status</span>
            <span class="hl-var">$value</span><span class="hl-code">-&gt;</span><span class="hl-identifier">code_item_last_state_id</span><span class="hl-code"> = </span><span class="hl-var">$_POST</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">status</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-var">$value</span><span class="hl-code">-&gt;</span><span class="hl-identifier">update</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
 
        </span><span class="hl-brackets">}</span>
    <span class="hl-brackets">}</span></pre></div></div>
]]></description>
      <pubDate>Sat, 20 Dec 2014 10:55:04 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Extension] yii-sorter]]></title>
      <link>http://www.yiiframework.com/extension/yii-sorter/</link>
      <description><![CDATA[Fast arbitrary sorting algorithm based on sparse array]]></description>
      <pubDate>Fri, 19 Dec 2014 22:13:49 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Extension] yii2-listjs]]></title>
      <link>http://www.yiiframework.com/extension/yii2-listjs/</link>
      <description><![CDATA[List.js widget for Yii2]]></description>
      <pubDate>Fri, 19 Dec 2014 12:31:57 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Extension] yii2-migration]]></title>
      <link>http://www.yiiframework.com/extension/yii2-migration/</link>
      <description><![CDATA[Yii 2 composer module migration helper]]></description>
      <pubDate>Fri, 19 Dec 2014 09:51:26 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Extension] yii2-knockout-list]]></title>
      <link>http://www.yiiframework.com/extension/yii2-knockout-list/</link>
      <description><![CDATA[A listview widget but rendered clientside using KnockoutJS.]]></description>
      <pubDate>Fri, 19 Dec 2014 08:52:38 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Extension] basiccms]]></title>
      <link>http://www.yiiframework.com/extension/basiccms/</link>
      <description><![CDATA[a basic yii2 content managment extension for easily creating and maintaining a page structure for frontend use]]></description>
      <pubDate>Wed, 17 Dec 2014 14:19:15 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Extension] yii2-export]]></title>
      <link>http://www.yiiframework.com/extension/yii2-export/</link>
      <description><![CDATA[Export menu that allows you to bulk export data as excel, pdf, csv, text, html.]]></description>
      <pubDate>Wed, 17 Dec 2014 08:00:43 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Extension] yii2-user-management]]></title>
      <link>http://www.yiiframework.com/extension/yii2-user-management/</link>
      <description><![CDATA[User management module for Yii 2]]></description>
      <pubDate>Tue, 16 Dec 2014 22:16:43 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Extension] yii-xunsearch]]></title>
      <link>http://www.yiiframework.com/extension/yii-xunsearch/</link>
      <description><![CDATA[xunsearch php sdk, yii1 extension and yii2 ActiveRecord support]]></description>
      <pubDate>Tue, 16 Dec 2014 10:57:05 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Extension] yii2-arraysearch]]></title>
      <link>http://www.yiiframework.com/extension/yii2-arraysearch/</link>
      <description><![CDATA[Advanced Search inside Array]]></description>
      <pubDate>Mon, 15 Dec 2014 09:25:03 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Extension] adminermodule]]></title>
      <link>http://www.yiiframework.com/extension/adminermodule/</link>
      <description><![CDATA[AdminerModule]]></description>
      <pubDate>Mon, 15 Dec 2014 07:08:45 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Wiki] Drills : Search by a HAS_MANY relation in Yii 2.0]]></title>
      <link>http://www.yiiframework.com/wiki/780/drills-search-by-a-has_many-relation-in-yii-2-0/</link>
      <description><![CDATA[<p>This article tries to describe the practical techniques of searching by a HAS_MANY relation using ActiveRecord of Yii 2.0.</p>

<p>In <strong>Yii 1.1</strong>, we sometimes got lost trying to search by a HAS_MANY relation. The wiki article <a href="http://www.yiiframework.com/wiki/428/drills-search-by-a-has_many-relation-in-yii-1-1/">Drills : Search by a HAS_MANY relation in Yii 1.1</a> was an effort to offer some practical techniques of searching by a HAS_MANY relation in Yii 1.1.</p>

<p>Now, we have <strong>Yii 2</strong>. Let's examine what we can do with the new ActiveRecord of Yii 2 when we have to solve the same tasks of searching by a HAS_MANY relation.</p>

<h2>Relation</h2>

<p>Two entities are sometimes connected with a relation of <strong>1:N</strong>. Or we may say that 1:N is the only possible relation between 2 entities as long as we are in the RDB world. <strong>1:1</strong> relation is just a particular kind of 1:N where N is always assumed to be 1 at the maximum. And <strong>N:N</strong> relation can be considered as a combination of two 1:N relations.</p>

<p>Yii supports this 1:N relation in ActiveRecord as <strong>HAS_ONE</strong> and <strong>HAS_MANY</strong> relations. 1:N relation seen from the side of N is HAS_ONE, and from the side of 1 it is HAS_MANY.</p>

<p>Now, let's construct an example of 1:N relation.</p>

<h2>Example of HAS_MANY</h2>

<p>Think about blog posts and their authors. It's a relation of "An Author has many Posts" and "A Post has an Author" at the same time. This pair of relations is represented with the following code:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-inlinetags">&lt;?php</span>
<span class="hl-comment">/*</span><span class="hl-comment">*
 * Author model
 *</span><span class="hl-inlinedoc"> @property </span><span class="hl-comment">integer $id
 *</span><span class="hl-inlinedoc"> @property </span><span class="hl-comment">string $name the author's name
...
 </span><span class="hl-comment">*/</span>
<span class="hl-reserved">class</span> <span class="hl-identifier">Author</span> <span class="hl-reserved">extends</span><span class="hl-code"> \</span><span class="hl-identifier">yii</span><span class="hl-code">\</span><span class="hl-identifier">db</span><span class="hl-code">\</span><span class="hl-identifier">ActiveRecord</span>
<span class="hl-brackets">{</span><span class="hl-code">
    ...
    </span><span class="hl-comment">/*</span><span class="hl-comment">*
     *</span><span class="hl-inlinedoc"> @return </span><span class="hl-comment">\yii\db\ActiveQuery
     </span><span class="hl-comment">*/</span>
    <span class="hl-reserved">public</span> <span class="hl-reserved">function</span> <span class="hl-identifier">getPosts</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span>
    <span class="hl-brackets">{</span>
        <span class="hl-reserved">return</span> <span class="hl-var">$this</span><span class="hl-code">-&gt;</span><span class="hl-identifier">hasMany</span><span class="hl-brackets">(</span><span class="hl-identifier">Post</span><span class="hl-code">::</span><span class="hl-identifier">className</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">author_id</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">id</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">
    ...</span></pre></div></div>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-inlinetags">&lt;?php</span>
<span class="hl-comment">/*</span><span class="hl-comment">*
 * Post model
 *</span><span class="hl-inlinedoc"> @property </span><span class="hl-comment">integer $id
 *</span><span class="hl-inlinedoc"> @property </span><span class="hl-comment">integer $author_id FK to the author's id
 *</span><span class="hl-inlinedoc"> @property </span><span class="hl-comment">string $title the title of the post
...
 </span><span class="hl-comment">*/</span>
<span class="hl-reserved">class</span> <span class="hl-identifier">Post</span> <span class="hl-reserved">extends</span><span class="hl-code"> \</span><span class="hl-identifier">yii</span><span class="hl-code">\</span><span class="hl-identifier">db</span><span class="hl-code">\</span><span class="hl-identifier">ActiveRecord</span>
<span class="hl-brackets">{</span><span class="hl-code">
    ...
    </span><span class="hl-comment">/*</span><span class="hl-comment">*
     *</span><span class="hl-inlinedoc"> @return </span><span class="hl-comment">\yii\db\ActiveQuery
     </span><span class="hl-comment">*/</span>
    <span class="hl-reserved">public</span> <span class="hl-reserved">function</span> <span class="hl-identifier">getAuthor</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span>
    <span class="hl-brackets">{</span>
        <span class="hl-reserved">return</span> <span class="hl-var">$this</span><span class="hl-code">-&gt;</span><span class="hl-identifier">hasOne</span><span class="hl-brackets">(</span><span class="hl-identifier">Author</span><span class="hl-code">::</span><span class="hl-identifier">className</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">id</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">author_id</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">
    ...</span></pre></div></div>

<p>Note that a relation in Yii 2 is a getter method returning <code>ActiveQuery</code>.</p>

<p>We are going to solve the possible use cases of searching with this example.</p>

<h2>Task #1</h2>

<p><strong>Show all posts that has a word in post title</strong></p>

<p>I want to start with an easy one. Let's retrieve all the posts that has a certain word in their title.</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-inlinetags">&lt;?php</span>
<span class="hl-comment">//</span><span class="hl-comment"> get all the posts that has a keyword in their title</span>
<span class="hl-var">$posts</span><span class="hl-code"> = </span><span class="hl-identifier">Post</span><span class="hl-code">::</span><span class="hl-identifier">find</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">where</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">like</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">title</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-var">$searchword</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">all</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-comment">//</span><span class="hl-comment"> show the results</span>
<span class="hl-reserved">foreach</span><span class="hl-brackets">(</span><span class="hl-var">$posts</span> <span class="hl-reserved">as</span> <span class="hl-var">$post</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
    <span class="hl-reserved">echo</span> <span class="hl-quotes">"</span><span class="hl-string">Title = </span><span class="hl-var">{$post-&gt;title}</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></pre></div></div>

<p>Ah, it was too easy. And no relation is involved in this task.</p>

<p>OK, let's move on to the next.</p>

<h2>Task #2</h2>

<p><strong>Show all posts that has a certain word in post title, with their authors</strong></p>

<p>Now we have to retrieve the authors' name, too.</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-inlinetags">&lt;?php</span>
<span class="hl-comment">//</span><span class="hl-comment"> get all the posts that has a keyword in their title, with their authors</span>
<span class="hl-var">$posts</span><span class="hl-code"> = </span><span class="hl-identifier">Post</span><span class="hl-code">::</span><span class="hl-identifier">find</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">where</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">like</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">title</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-var">$searchword</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">with</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">author</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">all</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-comment">//</span><span class="hl-comment"> show the results</span>
<span class="hl-reserved">foreach</span><span class="hl-brackets">(</span><span class="hl-var">$posts</span> <span class="hl-reserved">as</span> <span class="hl-var">$post</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
    <span class="hl-reserved">echo</span> <span class="hl-quotes">"</span><span class="hl-string">Title = </span><span class="hl-var">{$post-&gt;title}</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
    </span><span class="hl-reserved">echo</span> <span class="hl-quotes">"</span><span class="hl-string">Author = </span><span class="hl-var">{$post-&gt;author-&gt;name}</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></pre></div></div>

<p>Well, you may say "You didn't have to do it. Just adding a line to echo <code>$post-&gt;author-&gt;name</code> to the code of the 1st task would have been enough."</p>

<p>Yes, you are right. Post model has the <code>author</code> relation, so all you have to do to retrieve its Author is just accessing <strong>$post-&gt;author</strong>. How convenient is it! It's so-called <strong>lazy loading</strong> approach.</p>

<p>But the lazy loading approach has a drawback in this case, because you have to execute one query for retrieving an array of Posts, and every one query per each Post for retrieving its author. It will end up in 1+N queries to be executed.</p>

<p>Here we are retrieveing Posts and their Authors at the same time by using <strong>yii\db\ActiveQuery::with()</strong>. It enables you to do the job with only 2 queries. Just after the 1st query has retrieved the main models, the 2nd one will get all of the related models at once.  This is so-called <strong>eager loading</strong> approach.</p>

<p>The eager loading is preferrable in this particular case, because it's more effective. But, you have to note, it is not always so.</p>

<h2>Task #2-B</h2>

<p><strong>Show all posts with their authors that has a certain word in the author's name</strong></p>

<p>This is a variation of the task #2. You have to search by an attribute in the related model, not in the main model.</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-inlinetags">&lt;?php</span>
<span class="hl-comment">//</span><span class="hl-comment"> get all the posts that has a keyword in their author's name, with their authors</span>
<span class="hl-var">$posts</span><span class="hl-code"> = </span><span class="hl-identifier">Post</span><span class="hl-code">::</span><span class="hl-identifier">find</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">joinWith</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">author</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">where</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">like</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">author.name</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-var">$searchword</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">all</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-comment">//</span><span class="hl-comment"> show the results</span>
<span class="hl-reserved">foreach</span><span class="hl-brackets">(</span><span class="hl-var">$posts</span> <span class="hl-reserved">as</span> <span class="hl-var">$post</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
    <span class="hl-reserved">echo</span> <span class="hl-quotes">"</span><span class="hl-string">Title = </span><span class="hl-var">{$post-&gt;title}</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
    </span><span class="hl-reserved">echo</span> <span class="hl-quotes">"</span><span class="hl-string">Author = </span><span class="hl-var">{$post-&gt;author-&gt;name}</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></pre></div></div>

<p>We <strong>join</strong> the <code>author</code> table using <strong>yii\db\ActiveQuery::joinWith()</strong>, because we have to search the main model by an attribute of the related model. Note that we may need to disambiguate the column name with the table name for the parameter of <code>where</code>.</p>

<p>The more important thing to note is that the joining tables using <code>joinWith</code> will not reduce the number of queries in the eager loading scenario. Yii will still use 2 queries, one for the main model and the other for the related model. <strong>Yii 2 will always use the separated queries for the main model and the related models.</strong></p>

<p>So, you would not be able to make the code more efficient by modifying <code>with</code> to <code>joinWith</code> in the answer for the task #1.</p>

<p><strong>We join the related table using <code>joinWith</code> not because we expect good performance, but because we have to access a column in the related table in order to filter the rows in the main table.</strong></p>

<p>And <code>joinWith</code> will cause ActiveRecord to choose the eager loading approach by default, but you may suppress the loading of the related models by specifying the optional parameter <code>$eagerLoading</code> as <code>false</code>.</p>

<p>Huh? Who said "It's just a <strong>HAS_ONE</strong> relation. Yeah, it's simple. I know."?</p>

<p>Yes, you are right, definitely. Let's move on to the next task where we will deal with <strong>HAS_MANY</strong>.</p>

<h2>Task #3</h2>

<p><strong>Show all authors who have a post that has a certain word in its title</strong></p>

<p>Now we will retrieve the authors, not the posts.</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-inlinetags">&lt;?php</span>
<span class="hl-comment">//</span><span class="hl-comment"> get all the authors who have a post that has a certain word in its title</span>
<span class="hl-var">$authors</span><span class="hl-code"> = </span><span class="hl-identifier">Author</span><span class="hl-code">::</span><span class="hl-identifier">find</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">joinWith</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">posts</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-reserved">false</span><span class="hl-brackets">)</span>  <span class="hl-comment">//</span><span class="hl-comment"> will not get the related models</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">where</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">like</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">post.title</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-var">$searchword</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">all</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-comment">//</span><span class="hl-comment"> show the results</span>
<span class="hl-reserved">foreach</span><span class="hl-brackets">(</span><span class="hl-var">$authors</span> <span class="hl-reserved">as</span> <span class="hl-var">$author</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
    <span class="hl-reserved">echo</span> <span class="hl-quotes">"</span><span class="hl-string">Author = </span><span class="hl-var">{$author-&gt;name}</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></pre></div></div>

<p>We join the <code>posts</code> relation using <code>joinWith</code> because we need <code>post.title</code> in the searching, while we set <code>$leagerLoading</code> to false because we don't need the posts to be retrieved.</p>

<h2>Task #4</h2>

<p><strong>Show all authors who have a post that has a certain word in its title, with all of their posts</strong></p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-inlinetags">&lt;?php</span>
<span class="hl-comment">//</span><span class="hl-comment"> get all the authors who have a post that has a certain word in its title, with all of their posts</span>
<span class="hl-var">$authors</span><span class="hl-code"> = </span><span class="hl-identifier">Author</span><span class="hl-code">::</span><span class="hl-identifier">find</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">joinWith</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">posts</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span>  <span class="hl-comment">//</span><span class="hl-comment"> will eagerly load the related models</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">where</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">like</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">post.title</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-var">$searchword</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">all</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-comment">//</span><span class="hl-comment"> show the results</span>
<span class="hl-reserved">foreach</span><span class="hl-brackets">(</span><span class="hl-var">$authors</span> <span class="hl-reserved">as</span> <span class="hl-var">$author</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
    <span class="hl-reserved">echo</span> <span class="hl-quotes">"</span><span class="hl-string">Author = </span><span class="hl-var">{$author-&gt;name}</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
    </span><span class="hl-reserved">foreach</span><span class="hl-brackets">(</span><span class="hl-var">$author</span><span class="hl-code">-&gt;</span><span class="hl-identifier">posts</span> <span class="hl-reserved">as</span> <span class="hl-var">$post</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
        <span class="hl-reserved">echo</span> <span class="hl-quotes">"</span><span class="hl-string">Title = </span><span class="hl-var">{$post-&gt;title}</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span>
<span class="hl-brackets">}</span></pre></div></div>

<p>Don't forget that <strong>the query for the main model and those for the related models are separated</strong>. We add a condition using <code>post.title</code> in <code>where</code> part in order to filter the main models, but it doesn't affect the loading of the related models. The related models are loaded without any condition.</p>

<p>Well, then, what about the next task? It's a variation of the above.</p>

<h2>Task #4-B</h2>

<p><strong>Show all authors who have a post that has a certain word in its title, with all of their relevant posts</strong></p>

<p>In fact, this is a little more confusing than the above.</p>

<p>One solution is this:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-inlinetags">&lt;?php</span>
<span class="hl-comment">//</span><span class="hl-comment"> get all the authors who have a post that has a certain word in its title</span>
<span class="hl-var">$authors</span><span class="hl-code"> = </span><span class="hl-identifier">Author</span><span class="hl-code">::</span><span class="hl-identifier">find</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">joinWith</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">posts</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-reserved">false</span><span class="hl-brackets">)</span> <span class="hl-comment">//</span><span class="hl-comment"> won't get posts</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">where</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">like</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">post.title</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-var">$searchword</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">all</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-comment">//</span><span class="hl-comment"> show the results</span>
<span class="hl-reserved">foreach</span><span class="hl-brackets">(</span><span class="hl-var">$authors</span> <span class="hl-reserved">as</span> <span class="hl-var">$author</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
    <span class="hl-reserved">echo</span> <span class="hl-quotes">"</span><span class="hl-string">Author = </span><span class="hl-var">{$author-&gt;name}</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
    </span><span class="hl-comment">//</span><span class="hl-comment"> get all the posts that have a certain word in its title</span>
    <span class="hl-var">$posts</span><span class="hl-code"> = </span><span class="hl-var">$author</span><span class="hl-code">-&gt;</span><span class="hl-identifier">getPosts</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">where</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">like</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">post.title</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-var">$searchword</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">all</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-reserved">foreach</span><span class="hl-brackets">(</span><span class="hl-var">$posts</span> <span class="hl-reserved">as</span> <span class="hl-var">$post</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
        <span class="hl-reserved">echo</span> <span class="hl-quotes">"</span><span class="hl-string">Title = </span><span class="hl-var">{$post-&gt;title}</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span>
<span class="hl-brackets">}</span></pre></div></div>

<p>We join the <code>posts</code> relation using <code>joinWith</code> because we need <code>post.title</code> in the searching, while we set <code>$leagerLoading</code> to false because we don't want to load the posts at that point. And then we perform the lazy loading of the related posts with an on-the-fly condition for each author afterwards.</p>

<p>You could specify an on-the-fly condition to the relation when you eagerly load the related models:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-inlinetags">&lt;?php</span>
<span class="hl-comment">//</span><span class="hl-comment"> get all the authors who have a post that has a certain word in its title</span>
<span class="hl-var">$authors</span><span class="hl-code"> = </span><span class="hl-identifier">Author</span><span class="hl-code">::</span><span class="hl-identifier">find</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">joinWith</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">posts</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-reserved">false</span><span class="hl-brackets">)</span>  <span class="hl-comment">//</span><span class="hl-comment"> this is for the main models</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">where</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">like</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">post.title</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-var">$searchword</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">with</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span>    <span class="hl-comment">//</span><span class="hl-comment"> this is for the related models</span>
        <span class="hl-quotes">'</span><span class="hl-string">posts</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-var">$query</span><span class="hl-brackets">)</span> <span class="hl-identifier">use</span> <span class="hl-brackets">(</span><span class="hl-var">$searchword</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
            <span class="hl-var">$query</span><span class="hl-code">-&gt;</span><span class="hl-identifier">where</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">like</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">post.title</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-var">$searchword</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,
    </span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">all</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-comment">//</span><span class="hl-comment"> show the results</span>
<span class="hl-reserved">foreach</span><span class="hl-brackets">(</span><span class="hl-var">$authors</span> <span class="hl-reserved">as</span> <span class="hl-var">$author</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
    <span class="hl-reserved">echo</span> <span class="hl-quotes">"</span><span class="hl-string">Author = </span><span class="hl-var">{$author-&gt;name}</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
    </span><span class="hl-reserved">foreach</span><span class="hl-brackets">(</span><span class="hl-var">$posts</span> <span class="hl-reserved">as</span> <span class="hl-var">$post</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
        <span class="hl-reserved">echo</span> <span class="hl-quotes">"</span><span class="hl-string">Title = </span><span class="hl-var">{$post-&gt;title}</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span>
<span class="hl-brackets">}</span></pre></div></div>

<p>Because we are applying the same condition to the relation for searching the main models and that for retrieving related models, we may use a single relation with that condition for both.</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-inlinetags">&lt;?php</span>
<span class="hl-comment">//</span><span class="hl-comment"> get all the authors who have a post that has a certain word in its title</span>
<span class="hl-var">$authors</span><span class="hl-code"> = </span><span class="hl-identifier">Author</span><span class="hl-code">::</span><span class="hl-identifier">find</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">joinWith</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span>
        <span class="hl-quotes">'</span><span class="hl-string">posts</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-var">$query</span><span class="hl-brackets">)</span> <span class="hl-identifier">use</span> <span class="hl-brackets">(</span><span class="hl-var">$searchword</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
            <span class="hl-var">$query</span><span class="hl-code">-&gt;</span><span class="hl-identifier">where</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">like</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">post.title</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-var">$searchword</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,
    </span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">all</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-comment">//</span><span class="hl-comment"> show the results</span>
<span class="hl-reserved">foreach</span><span class="hl-brackets">(</span><span class="hl-var">$authors</span> <span class="hl-reserved">as</span> <span class="hl-var">$author</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
    <span class="hl-reserved">echo</span> <span class="hl-quotes">"</span><span class="hl-string">Author = </span><span class="hl-var">{$author-&gt;name}</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
    </span><span class="hl-reserved">foreach</span><span class="hl-brackets">(</span><span class="hl-var">$posts</span> <span class="hl-reserved">as</span> <span class="hl-var">$post</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
        <span class="hl-reserved">echo</span> <span class="hl-quotes">"</span><span class="hl-string">Title = </span><span class="hl-var">{$post-&gt;title}</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span>
<span class="hl-brackets">}</span></pre></div></div>

<p>In this way, you can use a customized relation for both the searching of the main models and the loading of the related models.</p>

<p>Let's move on to the next. It's a bit tough, though.</p>

<h2>Task #5</h2>

<p><strong>Show top 5 authors in the order of the name who has at least one post that has a certain word in post title, with his/her all posts</strong></p>

<p>OK, so we need to add "LIMIT" and "ORDER". Going to try with this one.</p>

<h3>Trial</h3>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-inlinetags">&lt;?php</span>
<span class="hl-var">$authors</span><span class="hl-code"> = </span><span class="hl-identifier">Author</span><span class="hl-code">::</span><span class="hl-identifier">find</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">joinWith</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">posts</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">where</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">like</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">post.title</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-var">$searchword</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">orderBy</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">author.name</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-identifier">SORT_ASC</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">limit</span><span class="hl-brackets">(</span><span class="hl-number">5</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">all</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-comment">//</span><span class="hl-comment"> show the results</span>
<span class="hl-reserved">foreach</span><span class="hl-brackets">(</span><span class="hl-var">$authors</span> <span class="hl-reserved">as</span> <span class="hl-var">$author</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
    <span class="hl-reserved">echo</span> <span class="hl-quotes">"</span><span class="hl-string">Author = </span><span class="hl-var">{$author-&gt;name}</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
    </span><span class="hl-reserved">foreach</span><span class="hl-brackets">(</span><span class="hl-var">$author</span><span class="hl-code">-&gt;</span><span class="hl-identifier">posts</span> <span class="hl-reserved">as</span> <span class="hl-var">$post</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
        <span class="hl-reserved">echo</span> <span class="hl-quotes">"</span><span class="hl-string">Title = </span><span class="hl-var">{$post-&gt;title}</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span>
<span class="hl-brackets">}</span></pre></div></div>

<p>You will notice that there is something strange in the output results. For example, the results may look like the following:</p>

<pre>[search word = foo]
Author = Andy
    Post = Don't use foo
    Post = Use yoo for foo
    Post = Don't use bar
    Post = Use yar for bar
Author = Ben
    Post = foo is great
    Post = I love foo
    Post = I also love bar
Author = Charlie
    Post = What's foo?
    Post = What's bar?
[end]
</pre>

<p>We could get only 3 authors, instead of 5 that is what we wanted.</p>

<p>Why did it happen? It was because the SQL used to retrieve the main models had been something like the following:</p>

<pre>SELECT * from author
  LEFT JOIN post on author.id = post.author_id
  WHERE post.title LIKE '%foo%'
  ORDER BY author.name
  LIMIT 5
</pre>

<p>Notice that <code>LIMIT 5</code> is applied to the number of the rows of an virtual table that is the result of joining <code>author</code> table with <code>post</code> table. The resulted rows may have less unique authors than the limit, because an author may <strong>have many</strong> posts.</p>

<p>In Yii 1.1, we could use <strong>GROUP BY</strong> trick, though it was MySQL specific. It can also be used in Yii 2:</p>

<h3>Solution #1</h3>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-inlinetags">&lt;?php</span>
<span class="hl-var">$authors</span><span class="hl-code"> = </span><span class="hl-identifier">Author</span><span class="hl-code">::</span><span class="hl-identifier">find</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">joinWith</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">posts</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">where</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">like</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">post.title</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-var">$searchword</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">groupBy</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">author.id</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">orderBy</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">author.name</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-identifier">SORT_ASC</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">limit</span><span class="hl-brackets">(</span><span class="hl-number">5</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">all</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre></div></div>

<p>In this way we could remove the redundant rows by grouping the results by author's ID.</p>

<p>You may say "Why don't you use <strong>DISTINCT</strong>? It might be cleaner and more compatible than a dirty trick." Seems fairly reasonable. Let's give it a try:</p>

<h3>Solution #2</h3>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-inlinetags">&lt;?php</span>
<span class="hl-var">$authors</span><span class="hl-code"> = </span><span class="hl-identifier">Author</span><span class="hl-code">::</span><span class="hl-identifier">find</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">distinct</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">joinWith</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">posts</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">where</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">like</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">post.title</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-var">$searchword</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">orderBy</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">author.name</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-identifier">SORT_ASC</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">limit</span><span class="hl-brackets">(</span><span class="hl-number">5</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">all</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre></div></div>

<p>Huh, done!</p>

<p>We are going to the last task, feeling a bit confused by the unexpected easiness.</p>

<h2>Task #6</h2>

<p><strong>Show top 5 authors in the order of name who has at least one post that has a certain word in post title, with his/her relevant posts</strong></p>

<p>Now it's a simple task. You just have to apply the same filter both for the searching of the main models and the loading the related models.</p>

<h3>Example of a Solution</h3>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-inlinetags">&lt;?php</span>
<span class="hl-var">$authors</span><span class="hl-code"> = </span><span class="hl-identifier">Author</span><span class="hl-code">::</span><span class="hl-identifier">find</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">distinct</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">joinWith</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span>
        <span class="hl-quotes">'</span><span class="hl-string">posts</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-var">$query</span><span class="hl-brackets">)</span> <span class="hl-identifier">use</span> <span class="hl-brackets">(</span><span class="hl-var">$searchword</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
            <span class="hl-var">$query</span><span class="hl-code">-&gt;</span><span class="hl-identifier">where</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">like</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">post.title</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-var">$searchword</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,
    </span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">orderBy</span><span class="hl-brackets">(</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">author.name</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-identifier">SORT_ASC</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">limit</span><span class="hl-brackets">(</span><span class="hl-number">5</span><span class="hl-brackets">)</span><span class="hl-code">
    -&gt;</span><span class="hl-identifier">all</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre></div></div>

<p>Thus we finish the drills in an anticlimactic end.</p>

<h2>Summary</h2>

<p>Fantastic, isn't it?</p>

<h3>Reference</h3>

<p>Please refer to the database sections of the guide.</p>

<ul><li><a href="http://www.yiiframework.com/doc-2.0/guide-index.html">The Definitive Guide to Yii 2.0</a>

<ul><li><a href="http://www.yiiframework.com/doc-2.0/guide-db-query-builder.html">Query Builder and Query</a></li>
<li><a href="http://www.yiiframework.com/doc-2.0/guide-db-active-record.html">Active Record</a></li>
</ul></li>
</ul>]]></description>
      <pubDate>Fri, 12 Dec 2014 02:51:29 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Extension] yii2-prettyphoto]]></title>
      <link>http://www.yiiframework.com/extension/yii2-prettyphoto/</link>
      <description><![CDATA[Yii2 widget for prettyPhoto jQuery lightbox clone]]></description>
      <pubDate>Fri, 12 Dec 2014 00:04:22 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Extension] yii-calendar]]></title>
      <link>http://www.yiiframework.com/extension/yii-calendar/</link>
      <description><![CDATA[Enhanced and partially rewritten version of ecalendarview extension for Yii 1.x]]></description>
      <pubDate>Tue, 09 Dec 2014 12:56:45 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Extension] easybodyclassbehavior]]></title>
      <link>http://www.yiiframework.com/extension/easybodyclassbehavior/</link>
      <description><![CDATA[This Yii Behavior is an easy, effective, and logical way to dynamically set classes on the body tag in your layouts.]]></description>
      <pubDate>Tue, 09 Dec 2014 08:00:28 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Extension] yii2-recaptcha-widget]]></title>
      <link>http://www.yiiframework.com/extension/yii2-recaptcha-widget/</link>
      <description><![CDATA[Google reCAPTCHA widget for Yii2]]></description>
      <pubDate>Mon, 08 Dec 2014 18:36:37 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Extension] yii2-timeline]]></title>
      <link>http://www.yiiframework.com/extension/yii2-timeline/</link>
      <description><![CDATA[Timeline widget displays ActiveRecords with date information]]></description>
      <pubDate>Mon, 08 Dec 2014 15:33:16 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[Extension] yii2-htmltemplateintegrator]]></title>
      <link>http://www.yiiframework.com/extension/yii2-htmltemplateintegrator/</link>
      <description><![CDATA[This extension can help you for your html template integration to Yii2.]]></description>
      <pubDate>Mon, 08 Dec 2014 07:58:28 +0000</pubDate>
    </item>
    <item>
      <title><![CDATA[[News] Yii 1.1.16 is released]]></title>
      <link>http://www.yiiframework.com/news/83/yii-1-1-16-is-released/</link>
      <description><![CDATA[<p>We are very pleased to announce that Yii Framework version 1.1.16 is released. You can download it at <a href="http://www.yiiframework.com/download/">yiiframework.com/download/</a>.</p>

<p>In this release, we have included more than 120 enhancements and bug fixes. For the complete list of changes in this release, please see <a href="https://raw.githubusercontent.com/yiisoft/yii/1.1.16/CHANGELOG">the change log</a>. <strong>NOTE</strong> This release contains changes that break backward compatibility. Please read the <a href="https://raw.githubusercontent.com/yiisoft/yii/1.1.16/UPGRADE">upgrading instructions</a> to learn how to upgrade.</p>

<p>We would like to express our gratitude to <a href="https://github.com/yiisoft/yii/graphs/contributors">all contributors</a> who have spent their precious time helping improve Yii and made this release possible.</p>

<p>Please note that Yii 1.1 is currently under maintenance mode, which means it will not introduce major new features in the future. We are currently actively developing and maintaining Yii 2.0 which represents a new generation of PHP framework utilizing the latest technologies. You may follow the development progress of Yii 2 by starring or watching <a href="https://github.com/yiisoft/yii2">Yii 2.0 GitHub Project</a>. You may also follow <a href="https://twitter.com/yiiframework">Yii Twitter feeds</a> or join <a href="https://www.facebook.com/groups/yiitalk/">Yii Facebook group</a> to connect with other Yii developers.</p>

<p>Below we will summarize some of the main enhancements introduced in this release.</p>

<h3>Database and ActiveRecord</h3>

<p>Database support is evolving constantly in Yii. This time we've added official support for
<a href="https://mariadb.org/">MariaDB</a> and <a href="http://www.cubrid.org/">CUBRID</a> databases.</p>

<p>ODBC now could be used in connections via <code>pdo_odbc</code> like the following:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-quotes">'</span><span class="hl-string">components</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-reserved">array</span><span class="hl-brackets">(</span><span class="hl-code">
    ......
    </span><span class="hl-quotes">'</span><span class="hl-string">db</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-reserved">array</span><span class="hl-brackets">(</span>
        <span class="hl-quotes">'</span><span class="hl-string">class</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-quotes">'</span><span class="hl-string">CDbConnection</span><span class="hl-quotes">'</span>
        <span class="hl-quotes">'</span><span class="hl-string">driverName</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-quotes">'</span><span class="hl-string">mysql</span><span class="hl-quotes">'</span><span class="hl-code">,
        </span><span class="hl-quotes">'</span><span class="hl-string">connectionString</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-quotes">'</span><span class="hl-string">odbc:Driver={MySQL};Server=127.0.0.1;Database=test</span><span class="hl-quotes">'</span><span class="hl-code">,
        </span><span class="hl-quotes">'</span><span class="hl-string">username</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-quotes">'</span><span class="hl-quotes">'</span><span class="hl-code">,
        </span><span class="hl-quotes">'</span><span class="hl-string">password</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-quotes">'</span><span class="hl-quotes">'</span><span class="hl-code">,
    </span><span class="hl-brackets">)</span><span class="hl-code">,
</span><span class="hl-brackets">)</span><span class="hl-code">,</span></pre></div></div>

<p>When defining STAT relation one could use scopes:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-reserved">public</span> <span class="hl-reserved">function</span> <span class="hl-identifier">relations</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span>
<span class="hl-brackets">{</span>
    <span class="hl-reserved">return</span> <span class="hl-reserved">array</span><span class="hl-brackets">(</span>
        <span class="hl-quotes">'</span><span class="hl-string">recentPostCount</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-reserved">array</span><span class="hl-brackets">(</span><span class="hl-identifier">self</span><span class="hl-code">::</span><span class="hl-identifier">STAT</span><span class="hl-code">,</span><span class="hl-quotes">'</span><span class="hl-string">Post</span><span class="hl-quotes">'</span><span class="hl-code">,</span><span class="hl-quotes">'</span><span class="hl-string">author_id</span><span class="hl-quotes">'</span><span class="hl-code">,</span><span class="hl-quotes">'</span><span class="hl-string">scopes</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-quotes">'</span><span class="hl-string">recentScope</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">,
    </span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></pre></div></div>

<p>One can specify post-JOIN operations (i.e. use|force|ignore index()) in relational queries like the following:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-var">$users</span><span class="hl-code">=</span><span class="hl-identifier">User</span><span class="hl-code">::</span><span class="hl-identifier">model</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">findAll</span><span class="hl-brackets">(</span><span class="hl-reserved">array</span><span class="hl-brackets">(</span>
    <span class="hl-quotes">'</span><span class="hl-string">select</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-quotes">'</span><span class="hl-string">t.id,t.name</span><span class="hl-quotes">'</span><span class="hl-code">,
    </span><span class="hl-quotes">'</span><span class="hl-string">with</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-reserved">array</span><span class="hl-brackets">(</span>
        <span class="hl-quotes">'</span><span class="hl-string">posts</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-reserved">array</span><span class="hl-brackets">(</span>
            <span class="hl-quotes">'</span><span class="hl-string">alias</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-quotes">'</span><span class="hl-string">p</span><span class="hl-quotes">'</span><span class="hl-code">,
            </span><span class="hl-quotes">'</span><span class="hl-string">select</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-quotes">'</span><span class="hl-string">p.id,p.title</span><span class="hl-quotes">'</span><span class="hl-code">,
            </span><span class="hl-quotes">'</span><span class="hl-string">joinOptions</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-quotes">'</span><span class="hl-string">USE INDEX(post__user)</span><span class="hl-quotes">'</span><span class="hl-code">,
        </span><span class="hl-brackets">)</span><span class="hl-code">,
    </span><span class="hl-brackets">)</span><span class="hl-code">,
</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre></div></div>

<p>It's described in detail in "Post-JOIN operations" section of "Relational Active Record" chapter of the guide.</p>

<p><code>CDbCommand::naturalLeftJoin()</code> and <code>CDbCommand::naturalRightJoin()</code> were added to allow adding corresponding join
statements to the command.</p>

<p>It is now possible to override the models PK using <code>primaryKey()</code> method, even if the table defines one.</p>

<h3>Files</h3>

<p><code>CFileHelper</code> got new methods:</p>

<ul><li><code>createDirectory()</code> - creates directory recursively setting permissions.</li>
<li><code>getExtensionByMimeType()</code> - determines the file extension name based on its MIME type.</li>
</ul><p>Mime-Type detection itself was improved by using the <code>mime.types</code> file from Apache HTTP project.</p>

<p><code>CFileHelper::removeDirectory()</code> now properly works with symlinked directories. It could be turned off by specifying
<code>traverseSymlinks</code> as <code>false</code> in options array.</p>

<p><code>CFileHelper::findFiles()</code> got new option named <code>absolutePaths</code>. Method returns absolute paths if the option is set to
<code>true</code> or relative ones otherwise. Default value is <code>true</code>.</p>

<p><code>CFileCache</code> got <code>cachePathMode</code> and <code>cacheFileMode</code> properties that could be used to <code>chmod()</code> these.</p>

<h3>Upgrades</h3>

<p>Multiple libraries we're using in the framework were updated:</p>

<ul><li>jQuery to 1.11.1.</li>
<li>jQuery UI to 1.11.2.</li>
<li>Multifile plugin used by CMultiFileUpload to 1.48.</li>
<li>HTMLPurifier to 4.6.0.</li>
<li>i18n data bundled with the framework to <a href="http://cldr.unicode.org/index/downloads/cldr-23-1">CLDR23.1</a>. This adds new
locales and has many fixes and additional data for existing ones.</li>
</ul><h3>HTML5</h3>

<p>When we've first released Yii 1.1 XHTML was the thing. Now it's HTML5 so we've decided to update default application
template generated by <code>yiic webapp</code> to use HTML5.</p>

<p><code>CHtml</code> and <code>CActiveForm</code> got support for HTML5 inputs such as color, datetime, datetime-local, week and search.</p>

<h3>Compatibility</h3>

<p>Various third party tools and libraries often used with Yii were updated so framework got updates to support these.</p>

<ul><li><code>CApcCache</code> is now compatible with APCu.</li>
<li><code>Yii::import()</code> and <code>Yii::createComponent()</code> are now able to use third party autoloader such as Composer.</li>
<li><code>Yii</code> and <code>YiiBase</code> were added to <code>composer.json</code> autoloading.</li>
<li>PHPUnit 3.8+ now could be used.</li>
</ul><h3>Request</h3>

<p>Request now properly reacts when there's <code>X-HTTP-Method-Override</code> header used to emulate various
request types via POST.</p>

<p>There are <code>getIsPatchRequest()</code>, <code>getIsPatchViaPostRequest()</code> and <code>getPatch()</code> methods allowing you to work with
HTTP PATCH requests.</p>

<p>Framework now responds with HTTP protocol version passed in request.</p>

<p><code>Request::getPreferredLanguage()</code> is now able to select a best matching between supported and requested languages.</p>

<h3>Error handling</h3>

<p>Error handling got several improvements.</p>

<ul><li>You can now access exception object via <code>ErrorHandler::getException()</code>. It allows passing to various third party
APIs efficiently.</li>
<li>Syslog log route is now available out of the box.</li>
<li><code>CClientScript</code> now throws exception in case you're trying to register package that doesn't exist.</li>
<li><code>CActiveForm::$clientOptions</code> got <code>errorCallback</code> so you can hook to clientside validation process using it.</li>
</ul><h3>Others</h3>

<ul><li>Web services got support for SOAP headers and document/literal encoding.</li>
<li>CJSON can now use <code>JsonSerializable</code> interface when serializing objects.</li>
<li><code>CHtml::beginForm()</code> now supports additional HTTP methods, via a hidden <code>_method</code> field.</li>
<li><code>CPasswordHelper::generateSalt()</code> now returns salt with <code>$2y$</code> cost.</li>
<li><code>CFormatter</code> is now able to format <code>DateTime</code> instances.</li>
</ul>]]></description>
      <pubDate>Fri, 05 Dec 2014 09:03:48 +0000</pubDate>
    </item>
  </channel>
</rss>
